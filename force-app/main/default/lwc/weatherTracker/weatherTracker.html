<template>
	<lightning-card title="Weather Tracker" icon-name="custom:custom63">
		<div class="flex-container">
			<div class="slds-p-around_medium">
				<!-- Add an error message div -->
				<template if:true={errorMessage}>
					<div class="slds-text-color_error">{errorMessage}</div>
				</template>
				<div class="flex-container slds-gutters slds-p-left_medium">
					<lightning-button-icon class="location-container" icon-name="utility:checkin"
						alternative-text="Check In" title="Check In" onclick={getUserLocation}>
					</lightning-button-icon>
					<!-- Flex container for Latitude and Longitude with conditional visibility -->
					<template if:false={useAddress}>
						<!-- Latitude input field -->
						<div class="flex-container">
							<lightning-input label="" name="Latitude" placeholder="Latitude" type="decimal"
								value={latitude} onchange={handleLatLongChange}></lightning-input>
							<lightning-input label="" name="Longitude" placeholder="Longitude" type="decimal"
								value={longitude} onchange={handleLatLongChange}></lightning-input>
						</div>
					</template>
					<!-- Address input field (hidden when not using Address) -->
					<template if:true={useAddress}>
						<div>
							<lightning-input label="" name="Address" placeholder="Address" type="text" value={address}
								onchange={handleAddressChange} class={addressClass}></lightning-input>
						</div>
					</template>
				</div>
				<!-- Toggle switch to choose between Lat/Long and Address -->
				<div class="toggle-container">
					<!-- Added a custom class for styling -->
					<lightning-input type="toggle" label="" message-toggle-active="Address"
						message-toggle-inactive="Lat/Long" checked={useAddress} onchange={handleAddressToggle}>
					</lightning-input>
				</div>

				<div class="slds-p-top_medium">
					<lightning-button label="Get Weather Observations" title="Get Weather"
						onclick={getWeatherObservations}>
					</lightning-button>
				</div>
			</div>
			<template if:true={weatherObservations}>
				<div class="slds-p-around_medium">
					<!-- Display weather observations here -->
					<lightning-card>
						<div slot="title">
							<div class="card-title">
								<div class="weather-icon">
									<template if:true={weatherIconUrl}>
										<img src={weatherIconUrl} alt="Weather Icon" />
                                    </template>
                                    <template if:false={weatherIconUrl}>
                                        <lightning-icon icon-name="utility:help"
                                            alternative-text="Weather Condition N/A" title="Weather Condition N/A"></lightning-icon>
                                    </template>
								</div>
								<h1>{originalQuery}</h1>
							</div>
						</div>
						<template if:true={isLoading}>
							<div class="loading-overlay">
								<lightning-spinner alternative-text="Loading" size="medium"></lightning-spinner>
							</div>
						</template>
						<template if:false={isLoading}>
							<div class="flex-container">
								<!-- Your other content here -->
								<div class="slds-p-around_medium">
									<p><strong>Wind Speed:</strong> {windSpeed}</p>
									<p><strong>Temperature:</strong> {temperature}Â°C</p>
									<p><strong>Humidity:</strong> {humidity}%</p>
								</div>
							</div>
						</template>
					</lightning-card>

				</div>
			</template>
		</div>
	</lightning-card>
</template>